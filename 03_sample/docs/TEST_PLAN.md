# Screen Action Recorder - テスト計画

> 作成日: 2026-02-06

---

## 目的

様々なアプリケーションと操作パターンで記録・再生をテストし、以下を確認する：

1. どのアプリで動作するか / しないか
2. どの操作が記録・再生できるか
3. 要素識別の精度（identifier, value, role等）
4. 問題点と改善が必要な箇所

---

## テスト一覧

### カテゴリA: ネイティブアプリ（macOS標準）

| # | アプリ | テスト内容 | 操作手順 |
|---|--------|-----------|---------|
| A1 | **Finder** | ファイル操作 | 新規フォルダ作成 → 名前変更 → 削除 |
| A2 | **メモ** | テキスト入力 | 新規メモ作成 → テキスト入力 → 保存 |
| A3 | **カレンダー** | イベント作成 | 日付クリック → イベント作成 → タイトル入力 |
| A4 | **連絡先** | 連絡先追加 | 新規連絡先 → 名前入力 → 電話番号入力 |
| A5 | **システム設定** | 設定変更 | ✅ 完了済み |

### カテゴリB: ビジネスチャット

| # | アプリ | テスト内容 | 操作手順 |
|---|--------|-----------|---------|
| B1 | **LINE** | メッセージ送信 | ✅ 完了済み（クリックのみ） |
| B2 | **LINE** | メッセージ送信（入力込み） | チャット選択 → テキスト入力 → 送信 |
| B3 | **Slack** | メッセージ送信 | チャンネル選択 → テキスト入力 → 送信 |
| B4 | **Discord** | メッセージ送信 | サーバー選択 → チャンネル選択 → 入力 → 送信 |

### カテゴリC: ブラウザ操作

| # | アプリ | テスト内容 | 操作手順 |
|---|--------|-----------|---------|
| C1 | **Safari** | URL入力・遷移 | アドレスバークリック → URL入力 → Enter |
| C2 | **Safari** | フォーム入力 | テキストフィールドクリック → 入力 → ボタンクリック |
| C3 | **Safari** | タブ操作 | 新規タブ作成 → タブ切り替え |
| C4 | **Chrome** | 同上（ブラウザ比較） | Safari同様の操作 |

### カテゴリD: オフィス系

| # | アプリ | テスト内容 | 操作手順 |
|---|--------|-----------|---------|
| D1 | **Numbers** | セル入力 | セルクリック → 数値入力 → 別セルクリック |
| D2 | **Numbers** | 数式入力 | セル選択 → =SUM(...)入力 → Enter |
| D3 | **Pages** | 文書作成 | テキスト入力 → 太字 → 保存 |
| D4 | **Excel（あれば）** | セル入力 | Numbers同様 |

### カテゴリE: 特殊操作

| # | 操作 | テスト内容 | 詳細 |
|---|------|-----------|------|
| E1 | **スクロール** | 画面スクロール | マウスホイール or トラックパッド |
| E2 | **ドラッグ&ドロップ** | ファイル移動 | Finderでファイルをドラッグ |
| E3 | **右クリックメニュー** | コンテキストメニュー | 右クリック → メニュー項目選択 |
| E4 | **ショートカットキー** | コピー&ペースト | Cmd+C → Cmd+V |
| E5 | **日本語入力** | IME変換 | ひらがな入力 → 変換 → 確定 |

---

## 優先度別テスト順序

### 優先度: 高（最初にテスト）

| テスト | 理由 |
|--------|------|
| B2: LINE入力 | 既に動作確認済み、入力追加で完成度UP |
| C1: Safari URL入力 | ブラウザ操作の基本、多くの業務で必要 |
| D1: Numbers入力 | スプレッドシート操作、データ処理に必須 |
| E4: ショートカットキー | コピペは最頻出操作 |

### 優先度: 中

| テスト | 理由 |
|--------|------|
| B3: Slack送信 | ビジネス利用で重要 |
| A1: Finder操作 | ファイル管理の基本 |
| E1: スクロール | 長いページ対応に必要 |

### 優先度: 低（後回し可）

| テスト | 理由 |
|--------|------|
| E2: ドラッグ&ドロップ | 実装が複雑 |
| E5: 日本語入力 | IME制御が難しい |

---

## 具体的なテスト手順

### テスト B2: LINE メッセージ送信（入力込み）

**目的:** クリック + テキスト入力の連携確認

**前提:**
- LINEアプリがインストール・ログイン済み
- テスト用の相手（自分のサブアカウント等）

**手順:**

```
1. レコーダー起動
   $ python3 mvp_click_recorder.py

2. 以下の操作を実行（手動）
   a. LINEを開く
   b. チャットリストから相手をクリック
   c. 入力欄をクリック
   d. 「テスト送信」とキーボード入力
   e. 送信ボタンをクリック

3. Ctrl+C で記録終了

4. 再生テスト
   $ python3 mvp_action_player.py mvp_output/session_xxx.json --dry-run

5. 本番再生（別の相手で試す）
   $ python3 mvp_action_player.py mvp_output/session_xxx.json
```

**確認ポイント:**
- [ ] チャット選択がrole/identifierで再検索できるか
- [ ] 入力欄が正しく特定できるか
- [ ] キーボード入力が記録されているか（※現在未実装）
- [ ] 送信ボタンが正しく特定できるか

---

### テスト C1: Safari URL入力

**目的:** ブラウザのアドレスバー操作確認

**手順:**

```
1. レコーダー起動
   $ python3 mvp_click_recorder.py

2. 以下の操作を実行（手動）
   a. Safariを開く
   b. アドレスバーをクリック
   c. 「https://www.google.com」と入力
   d. Enterキーを押す
   e. ページ読み込み完了を待つ

3. Ctrl+C で記録終了

4. 再生テスト
```

**確認ポイント:**
- [ ] アドレスバーが正しく特定できるか
- [ ] URL入力が記録されるか
- [ ] Enterキー（確定）が記録されるか
- [ ] ページ遷移後も操作継続可能か

---

### テスト D1: Numbers セル入力

**目的:** スプレッドシート操作確認

**手順:**

```
1. レコーダー起動
   $ python3 mvp_click_recorder.py

2. 以下の操作を実行（手動）
   a. Numbersを開く（新規スプレッドシート）
   b. セルA1をクリック
   c. 「100」と入力
   d. Tabキーでセルを移動
   e. 「200」と入力
   f. Enterキーで確定

3. Ctrl+C で記録終了

4. 再生テスト
```

**確認ポイント:**
- [ ] セルが正しく特定できるか
- [ ] 数値入力が記録されるか
- [ ] Tab/Enterキーが記録されるか

---

### テスト E4: ショートカットキー（コピー&ペースト）

**目的:** 修飾キー付き入力の確認

**手順:**

```
1. レコーダー起動
   $ python3 mvp_click_recorder.py

2. 以下の操作を実行（手動）
   a. メモアプリを開く
   b. テキストを選択（ドラッグ or Shift+矢印）
   c. Cmd+C（コピー）
   d. 別の場所をクリック
   e. Cmd+V（ペースト）

3. Ctrl+C で記録終了

4. 再生テスト
```

**確認ポイント:**
- [ ] Cmd+C が記録されるか
- [ ] Cmd+V が記録されるか
- [ ] 修飾キー（Cmd）が正しく認識されるか

---

## テスト結果記録テンプレート

各テスト後、以下の形式で結果を記録：

```markdown
### テスト結果: [テストID]

**日時:** YYYY-MM-DD HH:MM
**アプリ:**
**操作内容:**

**結果:**
- 記録: ✅成功 / ❌失敗
- 再生(dry-run): ✅成功 / ❌失敗
- 再生(実行): ✅成功 / ❌失敗

**取得できた要素情報:**
| 操作 | role | identifier | value | frame |
|------|------|------------|-------|-------|
| ... | ... | ... | ... | ... |

**問題点:**
-

**改善案:**
-
```

---

## 次のステップ

1. **キーボード入力を実装**してから、B2, C1, D1をテスト
2. または、**クリックのみでテストできる**ものから先に実施
   - A1: Finder（フォルダ作成はクリックのみで可能）
   - B3: Slack（チャンネル選択→過去メッセージクリック等）

---

どのテストから始めますか？
